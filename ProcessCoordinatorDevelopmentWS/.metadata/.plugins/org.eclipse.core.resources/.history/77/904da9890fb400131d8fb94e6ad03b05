<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jms="http://www.springframework.org/schema/jms"
       xmlns:amq="http://activemq.apache.org/schema/core"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context 
                           http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/jms 
                           http://www.springframework.org/schema/jms/spring-jms.xsd
                           http://activemq.apache.org/schema/core 
                           http://activemq.apache.org/schema/core/activemq-core.xsd">
        
	<!-- JMS ActiveMQ Connection Factory -->
	<bean id="jmsActiveMQFactory" class="org.apache.activemq.pool.PooledConnectionFactory">
		<property name="connectionFactory">
			<bean class="org.apache.activemq.ActiveMQConnectionFactory">
				<property name="brokerURL" value="tcp://localhost:61616"/>
			</bean>
		</property>
	</bean>
	
	<!-- ActiveMQ destination -->
	<bean id="defaultDestination" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg value="ESPER-QUEUE"/>
	</bean>
	
	<!-- Spring JMS Template For ActiveMQ -->
	<bean id="jmsActiveMQTemplate" class="org.springframework.jms.core.JmsTemplate">
		<property name="connectionFactory" ref="jmsActiveMQFactory"/>
		<property name="defaultDestination" ref="defaultDestination"/>
	</bean>	
	
	<!-- Default UnMarshaller -->
	<bean id="jmsMessageUnMarshaller" class="com.espertech.esperio.jms.JMSDefaultAnyMessageUnmarshaller"/>
	
	<!-- Input Adapter -->
	<bean id="" class="">
	</bean>
	
	<!-- Listener threads configuration -->
	<bean id="listenerContainer" class="org.springframework.jms.listener.SimpleMessageListenerContainer">
		<property name="connectionFactory" ref="jmsActiveMQFactory"/>
		<property name="destination" ref="defaultDestination"/>
		<property name="messageListener" ref="jmsInputAdapter"/>
	</bean>
	
	
</beans>